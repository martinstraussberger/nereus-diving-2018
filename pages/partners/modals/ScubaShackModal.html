<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Nereus Font -->
    <link rel="stylesheet" href="https://use.typekit.net/qqk2iur.css">
    <!-- CSS import -->
    <link rel="stylesheet" href="../../../public/css/modal.css">
    <link rel="stylesheet" href="../../../public/css/theme.css">
    <link href="https://fonts.googleapis.com/css?family=Orbitron&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
    <!-- Dependencies -->
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
    <!-- Date-Range Picker -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <!-- Country JS -->
    <!-- <script src="//geodata.solutions/includes/countrystate.js"></script> -->

    <title>Booking Request</title>
</head>

<body>
    <form action="">
        <section class="sec top">
            <picture>
                <a href="../../../index.html"><img class="logo-modal" src="../../../public/images/logo/nereus_logo_sub3.svg" alt=""></a>
                <img src="../../../public/images/icons/bookingRequest1.PNG" alt="">
            </picture>

            <header class="header">
                <h1>Booking Request</h1>
                <h5 style="color: var(--nereusorange);">Scuba Shack Dive Center</h5>
                <p>Almost there!</p>
                <p>First tell us who is going</p>
            </header>
            <!-- First Row -->
            <section class="wrapper-top">
                <div class="col-0">
                    <div id="elements">
                        <div class="cloneBox-spacing col-0" id="boxPersonId_0">
                            <hr>
                            <p class="wrapper-top-margin">NAME</p>
                            <input id="personId_0" type="text" name="" id="" required>
                        </div>
                    </div>
                </div>

                <div class="col-1">
                    <div id="elements2">
                        <div class="cloneBox-spacing col-1" id="boxDateId_0">
                            <p class="wrapper-top-margin">DATE OF BIRTH</p>
                            <input id="dateId_0" type="date">
                        </div>
                    </div>
                </div>

                <div class="col-2">
                    <div id="elements3">
                        <div class="cloneBox-spacing col-2" id="boxLicenceId_0">
                            <p class="wrapper-top-margin">DIVING LICENCE</p>
                            <select class="select-wrapper" id="licenceId_0" name="licence" required>
                                <option value="" disabled selected>Please Select</option>
                                <option value="0">Yes</option>
                                <option value="1">No</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div id="elements4">
                    <div id="removeItem" style="cursor: pointer; margin-top: 1vh;">
                        <br>
                        <span class="removeNode"><i class="fa fa-trash" style="color:red;cursor:pointer;"></i> Remove Person</span>
                    </div>
                </div>
            </section>

            <section class="wrapper-top-2">
                <!-- Add more Button clones Section -->
            </section>

            <!-- AddPerson Button -->
            <div class="col-5-r3">
                <button type="button" name="add" class="add-btn">+</button id="button" onclick="add()">
                <p>Add Person</p>
            </div>
        </section>

        <section class="sec middle">
            <picture>
                <img src="../../../public/images/icons/bookingRequest2.PNG" alt="">
            </picture>

            <header class="header">
                <h1>Booking Request</h1>
                <p>Time for details</p>
            </header>
            <!-- Content Form -->
            <div class="wrapper-middle">
                <!-- First Row Middle -->
                <div class="col-1to3-r1-sec-m range-picker" id="reportrange">
                    <i class="fa fa-calendar"></i>&nbsp;
                    <span></span> <i class="fa fa-caret-down"></i>
                </div>
                <!-- Second Row Middle -->
                <div class="col-1">
                    <input type="text" name="firstName" id="first-name" placeholder="First Name" maxlength="36" required>
                </div>
                <div class="col-2">
                    <input type="text" name="secondName" id="sec-name" placeholder="Last Name" maxlength="36" required>
                </div>
                <div class="col-3">
                    <input type="email" name="email" id="mail" placeholder="Email" maxlength="36" required>
                </div>
            </div>
            <section class="col-1to3-r4-sec-m">
                <!-- <p>Do you wish to book a Padi Course?</p>
                <br>
                <select id="getCourse" onchange="displayOptions(this);">
                    <option value="" disabled selected>Select your option</option>
                    <option id="selectValue0" value="0">Yes</option>
                    <option value="1">No</option>
                </select> -->

                <div class="grid-form" method="post" action="/Tests/Post">

                    <fieldset>
                        <legend>Do you wish to book a Padi Course?</legend>
                        <div class="checkbox">
                            <input type="checkbox" id="checkbox1" name="select_course" value="padi1" onclick="return ValidateBookingSelection();">
                            <label for="checkbox1"><span>Advanced Open Water Diver 3 Days - from <b>EUR 270</b></span></label>
                        </div>
                        <div class="checkbox">
                            <input type="checkbox" id="checkbox2" name="select_course" value="padi2" onclick="return ValidateBookingSelection();">
                            <label for="checkbox2"><span>PADI Open Water Diver 4 Days - from <b>EUR 300</b></span></label>
                        </div>
                        <div class="checkbox">
                            <input type="checkbox" id="checkbox3" name="select_course" value="padi3" onclick="return ValidateBookingSelection();">
                            <label for="checkbox3"><span>PADI Discover Scuba Diving 5 hours - from <b>EUR 70</b></span></label>
                        </div>
                    </fieldset>
                </div>
            </section>
            <br>
            <section class="col-1to3-r4-sec-m">
                <div class="grid-form" method="post" action="/Tests/Post">
                    <fieldset>
                        <legend>Do you wish to book a Diving Tour?</legend>
                        <div class="checkbox">
                            <input type="checkbox" id="checkbox4" name="select_course" value="dive1" onclick="return ValidateBookingSelection();">
                            <label for="checkbox4"><span>1 Dive - <b>EUR 26</b></span></label>
                        </div>
                        <div class="checkbox">
                            <input type="checkbox" id="checkbox5" name="select_course" value="dive2" onclick="return ValidateBookingSelection();">
                            <label for="checkbox5"><span>2 Dives - <b>EUR 52</b></span></label>
                        </div>
                        <div class="checkbox">
                            <input type="checkbox" id="checkbox6" name="select_course" value="dive4" onclick="return ValidateBookingSelection();">
                            <label for="checkbox6"><span>4 Dives - <b>EUR 100</b></span></label>
                        </div>
                        <div class="checkbox">
                            <input type="checkbox" id="checkbox7" name="select_course" value="dive6" onclick="return ValidateBookingSelection();">
                            <label for="checkbox7"><span>6 Dives - <b>EUR 140</b></span></label>
                        </div>
                    </fieldset>
                </div>
            </section>
            <div>
                <div>
                    <textarea maxlength="350" placeholder="Anything to add?"></textarea>
                </div>
            </div>
        </section>

        <section class="sec bottom">
            <picture>
                <img src="../../../public/images/icons/bookingRequest3.PNG" alt="">
            </picture>

            <header class="header">
                <h1>Booking Request</h1>
                <p>Help us</p>
                <p>to improve our service</p>
            </header>

            <div class="wrapper-bottom">
                <div class="col-1-r1-sec-bottom">
                    <h3>Where are you from?</h3>
                    <div class="select-wrapper">
                        <select name="country" class="countries order-alpha" id="countryId" required>
                            <option value="">Select Country</option>
                        </select>
                    </div>
                </div>
                <div>
                    <div class="select-wrapper">
                        <select name="state" class="states order-alpha" id="stateId" required>
                            <option value="" selected>Select State</option>
                        </select>
                    </div>
                </div>

                <div class="col-2-r2-sec-bottom">
                    <h3>Where did your hear about us?</h3>
                    <div class="select-wrapper">
                        <select class="col-2-r2-sec-bottom-margin" name="forwarded-to-us-by" required>
                            <option value="">Select</option>
                            <option value="">Facebook</option>
                            <option value="">Instagram</option>
                            <option value="">Friends & Family</option>
                            <option value="">YouTube</option>
                            <option value="">Dive Center</option>
                        </select>
                    </div>

                </div>
                <!-- Form Submit Button  -->
                <div class="col-1to2-r3-sec-bottom" id="submit-btn">
                    <button onclick="getUserInput();" class="submit-button" name="submit">Submit your Request</button>
                </div>
            </div>
        </section>
    </form>



</body>

<script>
    // let test = document.getElementsByTagName('input')[0].value;
    // console.log(test);
    // 2. selection for Luxury Cottage + Nights Divers or Non

    // 3. Get Time Range + First Name + Last Name + Email

    // 4. Get Selected Packages and sum up (include persons in calculation)

    // 5. Get Textarea Message

    // 6. Get Country + State + Selected Field of Where did you hear about us?


    var currentPerson_id = 0;
    var currentDate_id = 0;
    var currentLicence_id = 0;
    var checkNodes = 1;
    var countPersons = 1;

    $(document).ready(function() {
        // $('.add-btn').click(function() {

        $(document).on('click', '.add-btn', function() {

            if (checkNodes >= 9) {
                alert('We are sorry, but unfortunately we do not offer more than 8 Person per booking at the moment. ');
            } else {
                jQuery(' <section /> ', {
                    class: 'wrapper-top'
                }).appendTo('.wrapper-top-2');

                checkNodes++;
                countPersons++;
                console.log('Persons activated: ' + countPersons);
                console.log(checkNodes);
                nextElement($('#boxPersonId_0'));
                secondBoxElement($('#boxDateId_0'));
                thirdBoxElement($('#boxLicenceId_0'));

                async function nextElement(element) {
                    var newElement = await element.clone();
                    var id = currentPerson_id + 1;
                    currentPerson_id = id;
                    if (id <= 10) id = '0' + id;
                    newElement.attr("id", element.attr("id").split("_")[0] + "_" + id);
                    var person = $('input', newElement).attr("id");
                    $('input', newElement).attr("id", person.split("_")[0] + "_" + id);
                    newElement.appendTo($(".wrapper-top:last"));
                }
                async function secondBoxElement(element2) {
                    var newElement2 = await element2.clone();
                    var id2 = currentDate_id + 1;
                    currentDate_id = id2;
                    if (id2 <= 10) id2 = '0' + id2;
                    newElement2.attr("id", element2.attr("id").split("_")[0] + "_" + id2);
                    var date = $('input', newElement2).attr("id");
                    $('input', newElement2).attr("id", date.split("_")[0] + "_" + id2);
                    newElement2.appendTo($(".wrapper-top:last"));
                }
                async function thirdBoxElement(element3) {
                    var newElement3 = await element3.clone();
                    var id3 = currentLicence_id + 1;
                    currentLicence_id = id3;
                    if (id3 <= 10) id3 = '0' + id3;
                    newElement3.attr("id", element3.attr("id").split("_")[0] + "_" + id3);
                    var licence = $('select', newElement3).attr("id");
                    $('select', newElement3).attr("id", licence.split("_")[0] + "_" + id3);
                    newElement3.appendTo($(".wrapper-top:last"));
                    $('#removeItem').clone(true).appendTo($(".wrapper-top:last"));
                }
            }
        });
    });


    $(document).on('click', '.removeNode', function() {
        if (checkNodes <= 1) {
            alert('You are not allowed to remove the only Person of the list');
        } else {
            let validation = confirm('Are you sure you want to delete this Person?');
            if (validation == true) {
                $(this).closest('.wrapper-top').remove();
                // localStorage.clear();
                checkNodes--;
                countPersons--;
                console.log('Persons left after delete: ' + countPersons);
            }
        }
    });


    function ValidateBookingSelection() {
        var checkboxes = document.getElementsByName("select_course");
        var numberOfCheckedItems = 0;
        for (var i = 0; i < checkboxes.length; i++) {
            if (checkboxes[i].checked)
                numberOfCheckedItems++;
        }
        // if (numberOfCheckedItems > 5) {
        //     alert("You can't select more than two different Options");
        //     return false;
        // }
    }

    // Date-Range Picker
    // The MIT License (MIT)
    // Copyright (c) 2012-2018 Dan Grossman
    $(function() {
        let start = moment().add(0, 'days');
        let end = moment();

        function cb(start, end) {
            $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
        }
        $('#reportrange').daterangepicker({
            startDate: start,
            endDate: end,
        }, cb);
        cb(start, end);
    });
</script>

</html>